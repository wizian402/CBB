-------------------- 공통 --------------------
-- 공통 코드 --

CREATE TABLE "COM_CD" (
	"Key"	NUMBER		NOT NULL,
	"DIV"	VARCHAR2(4)		NOT NULL,
	"CD"	VARCHAR2(2)		NOT NULL,
	"NM"	VARCHAR2(20)		NULL
);

ALTER TABLE "COM_CD" ADD CONSTRAINT "PK_COM_CD" PRIMARY KEY (
	"Key"
);

ALTER TABLE COM_CD
ADD CONSTRAINT UNIQUE_DIV UNIQUE (DIV);

-- 사용자 정보 --
CREATE TABLE "USER_INFO" (
	"USER_NO"	VARCHAR2(10)		NOT NULL,
	"USER_GROUP_CD"	VARCHAR2(2)		NOT NULL,
	"LOGIN_ID"	VARCHAR2(100)		NOT NULL,
	"PSWD"	VARCHAR2(100)		NOT NULL,
	"RCNT_LOGIN_DT"	TIMESTAMP		NULL,
	"PSWD_CHG_DT"		TIMESTAMP		NULL,
	"PSWD_ERR_CNT"	NUMBER		NULL,
	"USER_CLOSE_YN"	VARCHAR2(1)		NULL
);

ALTER TABLE "USER_INFO" ADD CONSTRAINT "PK_USER_INFO" PRIMARY KEY (
	"USER_NO"
);

ALTER TABLE USER_INFO
ADD CONSTRAINT FK_USER_GROUP
FOREIGN KEY (USER_GROUP_CD)
REFERENCES USER_GROUP(USER_GROUP_CD);

CREATE SEQUENCE USER_INFO_SEQ
  START WITH 1
  INCREMENT BY 1
  NOMAXVALUE;

-- 사용자 그룹 --
CREATE TABLE "USER_GROUP" (
	"USER_GROUP_CD"	VARCHAR2(2)		NOT NULL,
	"USER_GROUP_NM"	VARCHAR(20)		NOT NULL
);

ALTER TABLE "USER_GROUP" ADD CONSTRAINT "PK_USER_GROUP" PRIMARY KEY (
	"USER_GROUP_CD"
);

insert into user_group values('10', '담당자');
insert into user_group values('20', '학생');
insert into user_group values('30', '교수');
insert into user_group values('40', '학과 담당자');
insert into user_group values('50', '산업체 사용자');
insert into user_group values('60', '상담원');

-- 담당자 --

CREATE TABLE "ADMINISTRATOR" (
	"ADMIN_ID"	NUMBER		NOT NULL,
	"NM"	VARCHAR2(100)		NOT NULL,
	"USER_NO"	VARCHAR2(10)		NOT NULL,
	"TKCG_TASK_CD"	VARCHAR2(2)		NOT NULL
);

ALTER TABLE "ADMINISTRATOR" ADD CONSTRAINT "PK_ADMINISTRATOR" PRIMARY KEY (
	"ADMIN_ID"
);

ALTER TABLE ADMINISTRATOR
ADD CONSTRAINT FK_USER_NO
FOREIGN KEY (USER_NO)
REFERENCES USER_INFO(USER_NO);


-- 학과 --
CREATE TABLE "SCSBJT" (
	"SCSBJT_CD"	CHAR(5)		NOT NULL,
	"SCSBJT_NM"	VARCHAR2(100)		NOT NULL
);

ALTER TABLE "SCSBJT" ADD CONSTRAINT "PK_SCSBJT" PRIMARY KEY (
	"SCSBJT_CD"
);

-- 학생 --
CREATE TABLE "STDNT" (
	"STDNT_SN"	NUMBER(22)		NOT NULL,
	"STDNT_NM"	VARCHAR2(100)		NOT NULL,
	"STDNT_TELNO"	VARCHAR2(11)		NOT NULL,
	"STDNT_EML_ADDR"	VARCHAR2(320)		NOT NULL,
	"STDNT_BRDT"	CHAR(8)		NOT NULL,
	"STDNT_ADDR"	varchar2(200)		NOT NULL,
	"STDNT_GRD"	VARCHAR2(20)		NOT NULL,
	"SCSBJT_CD"	CHAR(5)		NOT NULL,
	"USER_NO"	VARCHAR2(10)		NOT NULL
);

ALTER TABLE "STDNT" ADD CONSTRAINT "PK_STDNT" PRIMARY KEY (
	"STDNT_SN"
);

ALTER TABLE STDNT
ADD CONSTRAINT FK_SCSBJT_CD
FOREIGN KEY (SCSBJT_CD)
REFERENCES SCSBJT(SCSBJT_CD);

ALTER TABLE STDNT
ADD CONSTRAINT FK_USER_NO_STDNT
FOREIGN KEY (USER_NO)
REFERENCES USER_INFO(USER_NO);

-- 산업체 사용자 --
CREATE TABLE "BZENTY_USER" (
	"BZENTY_USER_NO"	VARCHAR2(10)		NOT NULL,
	"BRNO"	CHAR(10)		NOT NULL,
	"USER_NO"	VARCHAR2(10)		NOT NULL
);

ALTER TABLE "BZENTY_USER" ADD CONSTRAINT "PK_BZENTY_USER" PRIMARY KEY (
	"BZENTY_USER_NO"
);

ALTER TABLE BZENTY_USER
ADD CONSTRAINT FK_USER_NO_BZENTY_USER
FOREIGN KEY (USER_NO)
REFERENCES USER_INFO(USER_NO);

ALTER TABLE BZENTY_USER
ADD CONSTRAINT FK_BRNO
FOREIGN KEY (BRNO)
REFERENCES COMPANY_INFO(BRNO);

-- 기업체 정보 --

CREATE TABLE "COMPANY_INFO" (
	"BRNO"	CHAR(10)		NOT NULL,
	"LCNT_ADDR"	VARCHAR2(200)		NOT NULL,
	"ENT_KND"	VARCHAR2(5)		NOT NULL,
	"TPBIZ_NM"	VARCHAR2(100)		NOT NULL,
	"BZENTY_NM"	VARCHAR2(100)		NOT NULL,
	"BZENTY_RPRSV_NM"	VARCHAR2(100)		NOT NULL,
	"ANL_SLS_AMT"	NUMBER(15)		NOT NULL,
	"ANLSL_AMT"	NUMBER(15)		NOT NULL,
	"FNDN_YR"	CHAR(4)		NOT NULL,
	"CPTL"	NUMBER(15)		NOT NULL,
	"TNOWK"	NUMBER(10)		NOT NULL,
	"LAST_REG_DT"	DATE		NOT NULL
);

ALTER TABLE "COMPANY_INFO" ADD CONSTRAINT "PK_COMPANY_INFO" PRIMARY KEY (
	"BRNO"
);

-- 학과 담당자 --
CREATE TABLE "SCSBJT_USER" (
	"SCSBJT_PIC_ID"	VARCHAR2(20)		NOT NULL,
	"SCSBJT_CD"	CHAR(5)		NOT NULL,
	"USER_NO"	VARCHAR2(10)		NOT NULL
);

ALTER TABLE "SCSBJT_USER" ADD CONSTRAINT "PK_SCSBJT_USER" PRIMARY KEY (
	"SCSBJT_PIC_ID"
);

ALTER TABLE SCSBJT_USER
ADD CONSTRAINT FK_USER_NO_SCSBJT_USER
FOREIGN KEY (USER_NO)
REFERENCES USER_INFO(USER_NO);

-- 교수 --
CREATE TABLE "ACAVSR" (
	"ACAVSR_NO"	VARCHAR2(10)		NOT NULL,
	"USER_NO"	VARCHAR2(10)		NOT NULL,
	"SCSBJT_CD"	CHAR(5)		NOT NULL,
	"ACAVSR_NM"	NUMBER		NOT NULL,
	"ACAVSR_TELNO"	VARCHAR2(11)		NOT NULL,
	"ACAVSR_EML_ADDR"	VARCHAR2(320)		NOT NULL,
	"ACAVSR_BRDT"	CHAR(8)		NOT NULL,
	"ACAVSR_ADDR"	VARCHAR2(200)		NOT NULL
);

ALTER TABLE "ACAVSR" ADD CONSTRAINT "PK_ACAVSR" PRIMARY KEY (
	"ACAVSR_NO"
);

ALTER TABLE ACAVSR
ADD CONSTRAINT FK_USER_NO
FOREIGN KEY (USER_NO)
REFERENCES USER_INFO(USER_NO);


-------------------- 현장 실습 --------------------

-- 현장 실습 --
CREATE TABLE "TNG" (
	"TNG_NO"	NUMBER		NOT NULL,
	"BZENTY_USER_NO"	VARCHAR2(10)		NOT NULL,
	"SEMESTER"	VARCHAR2(30)		NULL,
	"TNG_NOPE"	NUMBER		NULL,
	"TNG_ST_YMD"	VARCHAR2(8)		NULL,
	"TNG_END_YMD"	VARCHAR2(8)		NULL,
	"APLY_ST_DT"	VARCHAR2(14)		NULL,
	"APLY_END_DT"	VARCHAR2(14)		NULL,
	"PRGRS_STTS"	VARCHAR2(2)		NULL,
	"TTL_TNG_HR"	VARCHAR2(6)		NULL,
	"CMCRS_HR"	VARCHAR2(6)		NULL,
	"TKCG_TASK_NM"	VARCHAR2(300)		NULL
);

ALTER TABLE "TNG" ADD CONSTRAINT "PK_TNG" PRIMARY KEY (
	"TNG_NO"
);

ALTER TABLE TNG
ADD CONSTRAINT FK_BZENTY_USER_NO_TNG
FOREIGN KEY (BZENTY_USER_NO)
REFERENCES BZENTY_USER(BZENTY_USER_NO);

-- 현장 실습 참여 학생 --

CREATE TABLE "TNG_STDNT" (
	"TNG_APLY_NO"	NUMBER		NOT NULL,
	"TNG_NO"	NUMBER		NOT NULL,
	"STDNT_SN"	NUMBER(22)		NOT NULL,
	"PROF_EVL_YN"	VARCHAR2(1)		NULL,
	"INDST_EVL_YN"	VARCHAR2(1)		NULL,
	"TNG_PRGRS_STTS"	VARCHAR2(2)		NULL,
	"TTRHR"	VARCHAR2(6)		NULL,
	"CMCRS_YN"	VARCHAR2(1)		NULL
);

ALTER TABLE "TNG_STDNT" ADD CONSTRAINT "PK_TNG_STDNT" PRIMARY KEY (
	"TNG_APLY_NO"
);

ALTER TABLE TNG_STDNT
ADD CONSTRAINT FK_TNG_NO_TNG_STDNT
FOREIGN KEY (TNG_NO)
REFERENCES TNG(TNG_NO);

ALTER TABLE TNG_STDNT
ADD CONSTRAINT FK_STDNT_SN_TNG_STDNT
FOREIGN KEY (STDNT_SN)
REFERENCES STDNT(STDNT_SN);

-- 현장 실습 출석 --

CREATE TABLE "TNG_ATNDC" (
	"ATTENDANCE_DATE"	VARCHAR2(8)		NOT NULL,
	"TNG_APLY_NO"	NUMBER		NOT NULL,
	"TNG_ATNDC_CD"	VARCHAR2(2)		NULL
);

ALTER TABLE "TNG_ATNDC" ADD CONSTRAINT "PK_TNG_ATNDC" PRIMARY KEY (
	"ATTENDANCE_DATE",
	"TNG_APLY_NO"
);

ALTER TABLE "TNG_ATNDC" ADD CONSTRAINT "FK_TNG_STDNT_TO_TNG_ATNDC_1" FOREIGN KEY (
	"TNG_APLY_NO"
)
REFERENCES "TNG_STDNT" (
	"TNG_APLY_NO"
);

-- 성적 --
CREATE TABLE "TNG_GRD" (
	"TNG_APLY_NO"	NUMBER		NOT NULL,
	"ACAVSR_NO"	VARCHAR2(10)		NULL,
	"BZENTY_USER_NO"	VARCHAR2(10)		NULL,
	"SEMESTER"	VARCHAR2(30)		NULL,
	"SCR"	NUMBER		NULL,
	"GRD"	VARCHAR2(2)		NULL,
	"WRT_CD"	VARCHAR2(2)		NULL
);

ALTER TABLE "TNG_GRD" ADD CONSTRAINT "PK_TNG_GRD" PRIMARY KEY (
	"TNG_APLY_NO"
);

ALTER TABLE "TNG_GRD" ADD CONSTRAINT "FK_TNG_STDNT_TO_TNG_GRD_1" FOREIGN KEY (
	"TNG_APLY_NO"
)
REFERENCES "TNG_STDNT" (
	"TNG_APLY_NO"
);

ALTER TABLE TNG_GRD
ADD CONSTRAINT FK_ACAVSR_NO
FOREIGN KEY (ACAVSR_NO)
REFERENCES ACAVSR(ACAVSR_NO);

ALTER TABLE TNG_GRD
ADD CONSTRAINT FK_BZENTY_USER_NO
FOREIGN KEY (BZENTY_USER_NO)
REFERENCES BZENTY_USER(BZENTY_USER_NO);

-- 지도일지 --
CREATE TABLE "TNG_RCD" (
	"Key"	NUMBER		NOT NULL,
	"TNG_APLY_NO"	NUMBER		NOT NULL,
	"ACAVSR_NO"	VARCHAR2(10)		NULL,
	"BZENTY_USER_NO"	VARCHAR2(10)		NULL,
	"LOG_DATE"	VARCHAR2(8)		NOT NULL,
	"EVL_CN"	VARCHAR2(4000)		NULL,
	"WRT_CD"	VARCHAR2(2)		NULL
);

ALTER TABLE "TNG_RCD" ADD CONSTRAINT "PK_TNG_RCD" PRIMARY KEY (
	"Key",
	"TNG_APLY_NO"
);

ALTER TABLE "TNG_RCD" ADD CONSTRAINT "FK_TNG_STDNT_TO_TNG_RCD_1" FOREIGN KEY (
	"TNG_APLY_NO"
)
REFERENCES "TNG_STDNT" (
	"TNG_APLY_NO"
);

ALTER TABLE TNG_RCD
ADD CONSTRAINT FK_ACAVSR_NO_RCD
FOREIGN KEY (ACAVSR_NO)
REFERENCES ACAVSR(ACAVSR_NO);

ALTER TABLE TNG_RCD
ADD CONSTRAINT FK_BZENTY_USER_NO_RCD
FOREIGN KEY (BZENTY_USER_NO)
REFERENCES BZENTY_USER(BZENTY_USER_NO);

-------------------- 취업 --------------------

-------------------- 상담 --------------------  
