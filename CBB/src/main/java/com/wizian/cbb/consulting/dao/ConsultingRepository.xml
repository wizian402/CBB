<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.wizian.cbb.consulting.dao.IConsultingRepository">
	<resultMap id="selectConsulting"
		type="com.wizian.cbb.consulting.model.ConItemVO">
		<result property="conItemsID" column="DSCSN_TTL_SN" />
		<result property="conItems" column="DSCSN_TTL" />
		<result property="use" column="USE_YN" />
		<result property="creationDate" column="CRT_YMD" />
		<result property="modificationDate" column="MDFCN_YMD" />
	</resultMap>
	<resultMap id="selectSchedules"
		type="com.wizian.cbb.consulting.model.SchedulesVO">
		<result property="type" column="type" />
		<result property="counselor" column="counselor" />
		<result property="item" column="item" />
		<result property="consultationDate" column="consultationDate" />
		<result property="consultationTime" column="consultationTime" />
		<result property="creationDate" column="creationDate" />
	</resultMap>


	<select id="Consultationitems" resultMap="selectConsulting">
		SELECT * FROM
		DSCSN_TTL
	</select>

	<insert id="itemInsert">
		INSERT INTO DSCSN_TTL (
		DSCSN_TTL_SN,
		DSCSN_TTL,
		USE_YN
		) VALUES (
		#{conItemsID},
		#{conItems},
		#{use}
		)
	</insert>

	<update id="itemUpdate">
		UPDATE DSCSN_TTL
		SET DSCSN_TTL = #{conItems},
		USE_YN =
		#{use}
		WHERE DSCSN_TTL_SN = #{conItemsID}
	</update>

	<delete id="itemDelete" parameterType="string">
		DELETE FROM DSCSN_TTL
		WHERE DSCSN_TTL_SN = #{itemId}
	</delete>

	<select id="itemCheck" resultType="string">
		SELECT DSCSN_TTL_SN FROM
		DSCSN_TTL WHERE DSCSN_TTL_SN = #{conItemsID}
	</select>








	<select id="adminSchedules" resultMap="selectSchedules">
		SELECT
		c.COUNSELOR_TYPE AS TYPE,
		c.NAME AS counselor,
		c.ARSP_NM AS ITEM,
		t.TIMETBL AS consultationTime,
		s.DSCSN_DT_YMD AS consultationDate,
		s.DSCSN_REG_YMD AS creationDate
		FROM
		CNSL_SCHEDULE s
		JOIN
		CNSL c ON s.CNSL_SN = c.CNSL_SN
		JOIN
		TIMETBL t ON s.TIMETBL_CD = t.TIMETBL_CD
	</select>

</mapper>